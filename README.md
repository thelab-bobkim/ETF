# ETF 텔레그램 알림 봇

## 📊 프로젝트 개요

AWS LightSail에서 실행되는 ETF 포트폴리오 자동 알림 텔레그램 봇입니다.
3시간마다 자동으로 포트폴리오 현황을 전문가급 디자인으로 전송합니다.

## 🎯 주요 기능

- ✅ **자동 알림**: 3시간마다 포트폴리오 리포트 자동 전송
- ✅ **전문가 디자인**: 박스 프레임, 트리 구조, 상태 이모지
- ✅ **실시간 수익률**: 개별 종목 및 전체 수익률 계산
- ✅ **한글 지원**: 완벽한 UTF-8 인코딩
- ✅ **상태 모니터링**: 수익률 기반 색상 표시 (🟢/🔴/⚪)

## 📱 모니터링 자산

1. **KODEX AI반도체** (304100.KS)
   - 투자금: 2억 2,012만원
   - 평가이익: +6,632만원
   - 수익률: +23.15%

2. **신한스노우볼인컴증권**
   - 투자금: 1억 1,499만원
   - 운영수익: +1,868만원
   - 수익률: +16.24%

**전체 포트폴리오**
- 총 투자금: 3억 3,512만원
- 현재 평가액: 4억 2,012만원
- 총 수익금: +8,500만원
- 전체 수익률: +25.37%

## 🚀 설치 및 실행

### 1. 저장소 클론
```bash
git clone https://github.com/thelab-bobkim/ETF.git
cd ETF
```

### 2. 텔레그램 봇 설정
`etf_bot.py` 파일에서 아래 값을 수정:
```python
TOKEN = 'YOUR_TELEGRAM_BOT_TOKEN'
CHAT_ID = 'YOUR_CHAT_ID'
```

### 3. 포트폴리오 데이터 수정
```python
PORTFOLIO = {
    "KODEX AI반도체": {
        "investment": 220125300,      # 원금
        "current_value": 286448140,   # 평가액
        "profit": 66322840            # 수익금
    },
    "신한스노우볼인컴증권": {
        "investment": 114998945,
        "current_value": 133679962,
        "profit": 18681017
    }
}
```

### 4. 실행
```bash
# 테스트 실행 (10초)
timeout 10 python3 etf_bot.py

# 백그라운드 실행
nohup python3 etf_bot.py > etf_bot.log 2>&1 &
```

### 5. 상태 확인
```bash
# 프로세스 확인
ps aux | grep etf_bot | grep -v grep

# 로그 확인
tail -f etf_bot.log
```

## 📊 메시지 예시

### 시작 메시지
```
╔═══════════════════════╗
   🚀 ETF 알림 봇 시작
╚═══════════════════════╝

⏰ 시작 시간
   2026년 02월 18일 09:40

📅 알림 주기
   3시간마다 자동 전송

┏━━━━━━━━━━━━━━━━━━━━━━┓
┃  💼 모니터링 자산        ┃
┗━━━━━━━━━━━━━━━━━━━━━━┛

✅ KODEX AI반도체 (304100.KS)
✅ 신한스노우볼인컴증권
```

### 포트폴리오 리포트
```
╔═══════════════════════╗
   📊 ETF 포트폴리오 리포트
╚═══════════════════════╝

🕐 2026년 02월 18일 09:40

┏━━━━━━━━━━━━━━━━━━━━━━┓
┃  💼 전체 포트폴리오 현황  ┃
┗━━━━━━━━━━━━━━━━━━━━━━┛

💰 총 투자금
   3억 3,512만 4,245원

📈 현재 평가액
   4억 2,012만 8,102원

💵 총 수익금
   +8,500만 3,857원

📊 전체 수익률  🟢
   +25.37%

┏━━━━━━━━━━━━━━━━━━━━━━┓
┃  📈 개별 종목 현황       ┃
┗━━━━━━━━━━━━━━━━━━━━━━┛

📊 KODEX AI반도체 (304100.KS) 🟢

├ 💼 투자금: 2억 2,012만 5,300원
├ 📈 평가액: 2억 8,644만 8,140원
├ 📊 수익률: +23.15%
└ 💵 수익금: +6,632만 2,840원

━━━━━━━━━━━━━━━━━━━━━━

💼 신한스노우볼인컴증권 🟢

├ 💼 투자금: 1억 1,499만 8,945원
├ 📈 평가액: 1억 3,367만 9,962원
├ 📊 수익률: +16.24%
└ 💵 수익금: +1,868만 1,017원

┏━━━━━━━━━━━━━━━━━━━━━━┓
┃  ⏰ 알림 정보            ┃
┗━━━━━━━━━━━━━━━━━━━━━━┛

📅 다음 리포트: 3시간 후
🔔 알림 주기: 3시간 자동

※ 본 정보는 자동으로 생성되었습니다.
```

## 🔧 관리 명령어

### 봇 중지
```bash
sudo pkill -f etf_bot
```

### 봇 재시작
```bash
sudo pkill -f etf_bot
sleep 2
cd /home/ubuntu/ETF
nohup python3 etf_bot.py > etf_bot.log 2>&1 &
```

### 로그 모니터링
```bash
# 실시간 로그
tail -f /home/ubuntu/ETF/etf_bot.log

# 최근 20줄
tail -20 /home/ubuntu/ETF/etf_bot.log
```

## 📋 요구사항

- Python 3.6+
- requests 라이브러리
- 텔레그램 봇 토큰
- 인터넷 연결

## 🎨 디자인 특징

### 박스 프레임
```
╔═══════════════╗  (헤더)
┏━━━━━━━━━━━━━┓  (섹션)
```

### 트리 구조
```
├ 항목1
├ 항목2
└ 항목3 (마지막)
```

### 상태 이모지
- 🟢 수익 발생 (양호)
- 🔴 손실 발생 (경고)
- ⚪ 손익 없음 (중립)

## 📝 버전 히스토리

### v2.0 (2026-02-18)
- ✨ 전문가 스타일 디자인 적용
- ✨ 박스 프레임 및 트리 구조 추가
- ✨ 실시간 수익률 상태 이모지
- 🐛 UTF-8 인코딩 문제 해결
- 🐛 정확한 투자 원금 계산 수정

### v1.0 (2026-02-17)
- 🎉 초기 버전
- ✅ 기본 포트폴리오 알림 기능
- ✅ 3시간 자동 알림

## 🤝 기여

이 프로젝트는 개인 포트폴리오 관리용입니다.

## 📄 라이선스

MIT License

## 📞 문의

프로젝트에 대한 문의사항이 있으시면 GitHub Issues를 이용해주세요.

---

**⚠️ 주의사항**
- 본 봇은 투자 조언을 제공하지 않습니다
- 모든 투자 결정은 본인의 책임입니다
- 텔레그램 봇 토큰은 절대 공개하지 마세요

---

**Made with ❤️ for ETF Portfolio Management**
